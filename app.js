const mockProducts = [
{
    title: "Product 1",
    desc: "Sample description",
    image: "assets/product_1.png",
    offers: [
        { seller: "Amazon", price: 1000 },
        { seller: "Flipkart", price: 950 },
        { seller: "Croma", price: 1100 }
    ]
},
{
    title: "Product 2",
    desc: "Sample description",
    image: "assets/product_2.png",
    offers: [
        { seller: "Amazon", price: 1010 },
        { seller: "Flipkart", price: 960 },
        { seller: "Croma", price: 1110 }
    ]
},
{
    title: "Product 3",
    desc: "Sample description",
    image: "assets/product_3.png",
    offers: [
        { seller: "Amazon", price: 1020 },
        { seller: "Flipkart", price: 970 },
        { seller: "Croma", price: 1120 }
    ]
},
{
    title: "Product 4",
    desc: "Sample description",
    image: "assets/product_4.png",
    offers: [
        { seller: "Amazon", price: 1030 },
        { seller: "Flipkart", price: 980 },
        { seller: "Croma", price: 1130 }
    ]
},
{
    title: "Product 5",
    desc: "Sample description",
    image: "assets/product_5.png",
    offers: [
        { seller: "Amazon", price: 1040 },
        { seller: "Flipkart", price: 990 },
        { seller: "Croma", price: 1140 }
    ]
},
{
    title: "Product 6",
    desc: "Sample description",
    image: "assets/product_6.png",
    offers: [
        { seller: "Amazon", price: 1050 },
        { seller: "Flipkart", price: 1000 },
        { seller: "Croma", price: 1150 }
    ]
},
{
    title: "Product 7",
    desc: "Sample description",
    image: "assets/product_7.png",
    offers: [
        { seller: "Amazon", price: 1060 },
        { seller: "Flipkart", price: 1010 },
        { seller: "Croma", price: 1160 }
    ]
},
{
    title: "Product 8",
    desc: "Sample description",
    image: "assets/product_8.png",
    offers: [
        { seller: "Amazon", price: 1070 },
        { seller: "Flipkart", price: 1020 },
        { seller: "Croma", price: 1170 }
    ]
},
{
    title: "Product 9",
    desc: "Sample description",
    image: "assets/product_9.png",
    offers: [
        { seller: "Amazon", price: 1080 },
        { seller: "Flipkart", price: 1030 },
        { seller: "Croma", price: 1180 }
    ]
},
{
    title: "Product 10",
    desc: "Sample description",
    image: "assets/product_10.png",
    offers: [
        { seller: "Amazon", price: 1090 },
        { seller: "Flipkart", price: 1040 },
        { seller: "Croma", price: 1190 }
    ]
},
{
    title: "Product 11",
    desc: "Sample description",
    image: "assets/product_11.png",
    offers: [
        { seller: "Amazon", price: 1100 },
        { seller: "Flipkart", price: 1050 },
        { seller: "Croma", price: 1200 }
    ]
},
{
    title: "Product 12",
    desc: "Sample description",
    image: "assets/product_12.png",
    offers: [
        { seller: "Amazon", price: 1110 },
        { seller: "Flipkart", price: 1060 },
        { seller: "Croma", price: 1210 }
    ]
},
{
    title: "Product 13",
    desc: "Sample description",
    image: "assets/product_13.png",
    offers: [
        { seller: "Amazon", price: 1120 },
        { seller: "Flipkart", price: 1070 },
        { seller: "Croma", price: 1220 }
    ]
},
{
    title: "Product 14",
    desc: "Sample description",
    image: "assets/product_14.png",
    offers: [
        { seller: "Amazon", price: 1130 },
        { seller: "Flipkart", price: 1080 },
        { seller: "Croma", price: 1230 }
    ]
},
{
    title: "Product 15",
    desc: "Sample description",
    image: "assets/product_15.png",
    offers: [
        { seller: "Amazon", price: 1140 },
        { seller: "Flipkart", price: 1090 },
        { seller: "Croma", price: 1240 }
    ]
},
{
    title: "Product 16",
    desc: "Sample description",
    image: "assets/product_16.png",
    offers: [
        { seller: "Amazon", price: 1150 },
        { seller: "Flipkart", price: 1100 },
        { seller: "Croma", price: 1250 }
    ]
},
{
    title: "Product 17",
    desc: "Sample description",
    image: "assets/product_17.png",
    offers: [
        { seller: "Amazon", price: 1160 },
        { seller: "Flipkart", price: 1110 },
        { seller: "Croma", price: 1260 }
    ]
},
{
    title: "Product 18",
    desc: "Sample description",
    image: "assets/product_18.png",
    offers: [
        { seller: "Amazon", price: 1170 },
        { seller: "Flipkart", price: 1120 },
        { seller: "Croma", price: 1270 }
    ]
},
{
    title: "Product 19",
    desc: "Sample description",
    image: "assets/product_19.png",
    offers: [
        { seller: "Amazon", price: 1180 },
        { seller: "Flipkart", price: 1130 },
        { seller: "Croma", price: 1280 }
    ]
},
{
    title: "Product 20",
    desc: "Sample description",
    image: "assets/product_20.png",
    offers: [
        { seller: "Amazon", price: 1190 },
        { seller: "Flipkart", price: 1140 },
        { seller: "Croma", price: 1290 }
    ]
},
{
    title: "Product 21",
    desc: "Sample description",
    image: "assets/product_21.png",
    offers: [
        { seller: "Amazon", price: 1200 },
        { seller: "Flipkart", price: 1150 },
        { seller: "Croma", price: 1300 }
    ]
},
{
    title: "Product 22",
    desc: "Sample description",
    image: "assets/product_22.png",
    offers: [
        { seller: "Amazon", price: 1210 },
        { seller: "Flipkart", price: 1160 },
        { seller: "Croma", price: 1310 }
    ]
},
{
    title: "Product 23",
    desc: "Sample description",
    image: "assets/product_23.png",
    offers: [
        { seller: "Amazon", price: 1220 },
        { seller: "Flipkart", price: 1170 },
        { seller: "Croma", price: 1320 }
    ]
},
{
    title: "Product 24",
    desc: "Sample description",
    image: "assets/product_24.png",
    offers: [
        { seller: "Amazon", price: 1230 },
        { seller: "Flipkart", price: 1180 },
        { seller: "Croma", price: 1330 }
    ]
},
{
    title: "Product 25",
    desc: "Sample description",
    image: "assets/product_25.png",
    offers: [
        { seller: "Amazon", price: 1240 },
        { seller: "Flipkart", price: 1190 },
        { seller: "Croma", price: 1340 }
    ]
},
{
    title: "Product 26",
    desc: "Sample description",
    image: "assets/product_26.png",
    offers: [
        { seller: "Amazon", price: 1250 },
        { seller: "Flipkart", price: 1200 },
        { seller: "Croma", price: 1350 }
    ]
},
{
    title: "Product 27",
    desc: "Sample description",
    image: "assets/product_27.png",
    offers: [
        { seller: "Amazon", price: 1260 },
        { seller: "Flipkart", price: 1210 },
        { seller: "Croma", price: 1360 }
    ]
},
{
    title: "Product 28",
    desc: "Sample description",
    image: "assets/product_28.png",
    offers: [
        { seller: "Amazon", price: 1270 },
        { seller: "Flipkart", price: 1220 },
        { seller: "Croma", price: 1370 }
    ]
},
{
    title: "Product 29",
    desc: "Sample description",
    image: "assets/product_29.png",
    offers: [
        { seller: "Amazon", price: 1280 },
        { seller: "Flipkart", price: 1230 },
        { seller: "Croma", price: 1380 }
    ]
},
{
    title: "Product 30",
    desc: "Sample description",
    image: "assets/product_30.png",
    offers: [
        { seller: "Amazon", price: 1290 },
        { seller: "Flipkart", price: 1240 },
        { seller: "Croma", price: 1390 }
    ]
}
];


const resultsEl=document.getElementById("results");
const foundCount=document.getElementById("foundCount");
const queryInput=document.getElementById("query");
const searchBtn=document.getElementById("searchBtn");
const mockBtn=document.getElementById("mockPopulate");
const toggleTheme=document.getElementById("toggleTheme");

let currentProducts=[];

const formatINR=v=>"â‚¹"+v.toLocaleString('en-IN');

function applyTheme(){
  const t=localStorage.getItem('ps_theme')||'light';
  document.body.classList.toggle('dark', t==='dark');
}
applyTheme();

toggleTheme.onclick=()=>{
 document.body.classList.toggle('dark');
 localStorage.setItem('ps_theme', document.body.classList.contains('dark')?'dark':'light');
};

mockBtn.onclick=()=>{ currentProducts=mockProducts.slice(); render(currentProducts); };
searchBtn.onclick=()=>search(queryInput.value);
queryInput.addEventListener('keydown',e=>{ if(e.key==='Enter') search(queryInput.value); });

function search(q){
 q=(q||'').toLowerCase();
 const list=currentProducts.filter(p=>p.title.toLowerCase().includes(q));
 render(list);
}

function render(list){
 resultsEl.innerHTML="";
 list.forEach(p=>{
   const min=Math.min(...p.offers.map(o=>o.price));
   const el=document.createElement('div');
   el.className='product';
   el.innerHTML=
     "<img src='"+p.image+"' style='width:100%;border-radius:8px;'>"+
     "<h3>"+p.title+"</h3>"+
     "<p>"+p.desc+"</p>"+
     "<div>Best price: "+formatINR(min)+"</div>"+
     "<div class='prices'>"+
       p.offers.map(o=>"<span class='price-pill'>"+o.seller+": "+formatINR(o.price)+"</span>").join("")+
     "</div>";
   resultsEl.appendChild(el);
 });
 foundCount.textContent=list.length+" products";
}

currentProducts=[];
render([]);
